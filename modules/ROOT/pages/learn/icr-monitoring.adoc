= Replication monitoring
:page-partial:
:page-layout: article
:page-status: {release-status-sgw} -- {release-comments-sgw}
:page-edition: Under Development
:page-role:
:description: Inter-cluster replication (Sync Gateway to Sync Gateway) monitoring using SG-Replicate protocol


include::partial$_std-hdr-sgw.adoc[]
include::partial$block-authors-notes.adoc[tag=wip]
:topic-group: Inter-cluster Replication
:param-related: {xref-sgw-pg-config-properties} | {xref-sgw-pg-rest-api-admin}
:param-abstract: This content covers the monitoring aspects of inter-cluster  replication
include::partial$block-abstract.adoc[]

ifeval::["{releaseStatus}" == "gamma"]
[.pane__frame--orange]
.Author's Notes
--
Document relevant aspects of _replication monitoring_.

Information sources include:

*  https://issues.couchbase.com/browse/DOC-6493
* https://docs.google.com/document/d/13E6JOq8u_AaUd_t8FZEPCAuq7jfkjryecjBQBHE3pG8/edit?ts=5e7cd22f#heading=h.b2gu37hg0ou0
--
endif::[]


== Overview

// tag::overview[]

Use the {xref-sgw-endpoint-admin-api-replication-repstatus} Admin REST API endpoint to check the status of replications.

// end::overview[]

== Statistics Captured

Use the `_expvars` Admin REST API to access following stats:

|===
| Item | Notes


|"sgr_num_attachment_bytes_transferred": 0,
|Y (unchanged)

| "sgr_num_attachments_transferred": 0,
|Y (unchanged)

| "sgr_num_docs_failed_to_push": 0,
|Y (unchanged)

|"sgr_num_docs_failed_to_push_access": 0,
a|
--
NEW

Cases when documents are rejected because user does not have read write permissions?
--

| "sgr_num_docs_pushed":
|Y (unchanged)

| "sgr_delta_pull_replication_count"
|NEW


| "sgr_delta_push_doc_count"
|NEW

| "sgr_deltas_requested":
|NEW

| "sgr_deltas_sent":
|NEW


|sgr_conflict_delected
a|
--
NEW

Count of documents where conflicts were detected
--

a|sgr_conflict_resolved
a|
--
NEW

Count of conflicting documents that were resolved successfully (by the active node)
--

|sgw_conflict_skipped_error
a|
--
NEW

Count of documents that were skipped during sync because of an error in conflict resolution
--
|===




== SGR1

* Use `_active_tasks` to monitor SG-Replicate 1.0 replications  (`GET`)
+
The content returned will be the same as that returned by `_replicationStatus` and contains additional content over the SG-Replicate 1.0 version:
+
** direction
** is_persistent
** status (stopped/running).
** last_seq_push
** last_seq_pull



include::partial$block-related-content-icr.adoc[]